<!DOCTYPE html>
<html>
  <head>
    <title>Luna SDK -- Cobalt</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>Connecting to the Server :: Luna SDK -- Cobalt</title>
<link rel="shortcut icon" href="/sdk-luna/images/favicon.ico" type="image/x-icon" />
<link href="/sdk-luna/css/nucleus.css" rel="stylesheet">
<link href="/sdk-luna/css/font-awesome.min.css" rel="stylesheet">
<link href="/sdk-luna/css/hybrid.css" rel="stylesheet">
<link href="/sdk-luna/css/featherlight.min.css" rel="stylesheet">
<link href="/sdk-luna/css/auto-complete.css" rel="stylesheet">
<link href="/sdk-luna/theme-original/style.css" rel="stylesheet">

  <link href="/sdk-luna/theme-original/variant-blue.css" rel="stylesheet">

<link rel="stylesheet" href="/sdk-luna/css/bootstrap.min.css">
<script src="/sdk-luna/js/jquery-2.x.min.js"></script>
<style type="text/css">
  :root #header + #content > #left > #rlblock_left {
    display:none !important;
  }
</style>
<link href="/sdk-luna/css/tabs.css" rel="stylesheet" type="text/css">
<script src="/sdk-luna/js/tabs.js"></script>


    
  </head>
  <body data-url="/sdk-luna/using-luna-sdk/connecting/">
    
      <div id="headermain"></div>
<nav id="sidebar" class="showVisitedLinks">



<div class="highlightable">
  <div id="header-wrapper">
    <div id="header">
      
	
  
    <p><img src="/sdk-luna/images/logo-white.png" alt="Cobalt's SDK Documentation" /></p>

<p>Luna SDK &ndash; Cobalt</p>

  


    </div>
        <div class="searchbox">
		    <label for="search-by"><i class="fa fa-search"></i></label>
		    <input data-search-input id="search-by" type="text" placeholder="Search...">
		    <span data-search-clear=""><i class="fa fa-close"></i></span>
		</div>
		<script type="text/javascript" src="/sdk-luna/js/lunr.min.js"></script>
		<script type="text/javascript" src="/sdk-luna/js/auto-complete.js"></script>
		<script type="text/javascript">
        
            var baseurl = "https:\/\/cobaltspeech.github.io\/sdk-luna";
        
		</script>
		<script type="text/javascript" src="/sdk-luna/js/search.js"></script>
  </div>

      <ul class="topics">
            <li data-nav-id="/sdk-luna/" class="dd-item">
            <a href="/sdk-luna/"><i class="fa fa-fw fa-home"></i></a>
            </li>
    <li data-nav-id="/sdk-luna/getting-started/" class="dd-item
        ">
      <div>
      <a href="/sdk-luna/getting-started/">Getting Started</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/sdk-luna/using-luna-sdk/" class="dd-item parent haschildren
        ">
      <div>
      <a href="/sdk-luna/using-luna-sdk/">Using Luna SDK</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/sdk-luna/using-luna-sdk/include/" class="dd-item">
        <div>
          <a href="/sdk-luna/using-luna-sdk/include/">
            Including the SDK
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/sdk-luna/using-luna-sdk/errors/" class="dd-item">
        <div>
          <a href="/sdk-luna/using-luna-sdk/errors/">
            Error Handling
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/sdk-luna/using-luna-sdk/connecting/" class="dd-item active">
        <div>
          <a href="/sdk-luna/using-luna-sdk/connecting/">
            Connecting to the Server
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/sdk-luna/using-luna-sdk/synthesis-config/" class="dd-item">
        <div>
          <a href="/sdk-luna/using-luna-sdk/synthesis-config/">
            Synthesis Configuration
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/sdk-luna/using-luna-sdk/batch/" class="dd-item">
        <div>
          <a href="/sdk-luna/using-luna-sdk/batch/">
            Batch Synthesis
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/sdk-luna/using-luna-sdk/streaming/" class="dd-item">
        <div>
          <a href="/sdk-luna/using-luna-sdk/streaming/">
            Streaming Synthesis
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/sdk-luna/protobuf/" class="dd-item
        ">
      <div>
      <a href="/sdk-luna/protobuf/">Luna API Reference</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>



        <section id="shortcuts">
                <li class="" role=""><h3>More</h3><a href="https://github.com/cobaltspeech/sdk-luna" target="_blank" rel="noopener"><i class='fa fa-github'></i> <label>Github repo</label></a></li>
                <li class="" role=""><a href="https://www.cobaltspeech.com/contact" target="_blank" rel="noopener"><i class='fa fa-bookmark'></i> <label>Contact us</label></a></li>
        </section>
            <a id="clear-history" class="" href="#" data-clear-history-toggle=""><i class="fa  fa-history"></i> Clear History</a>

    <hr />
    <li></li>
    
    </ul>

 <section id="footer">
    </section>
  </div>
</nav>



<section id="body">
<div id="overlay"></div>
<div class="padding highlightable">

  <div id="top-bar">
    <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
        <span id="sidebar-toggle-span">
          <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
            <i class="fa fa-bars"></i>
          </a>
        </span>
        <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
        <span class="links">
        







 <a href='/sdk-luna/'>Luna SDK Documentation</a> > <a href='/sdk-luna/using-luna-sdk/'>Using Luna SDK</a> > Connecting to the Server

 

 

   
        </span>
    </div>
    
    
    <div class="progress">
        <div class="wrapper">
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#default-connection">Default Connection</a></li>
<li><a href="#insecure-connection">Insecure Connection</a></li>
<li><a href="#client-authentication">Client Authentication</a></li>
</ul></li>
</ul>
</nav>
        </div>
    </div>
    

  </div>


<div id="body-inner">
  
    <h1>Connecting to the Server</h1>
  



    
    
    
    <p>Once you have the Luna server <a href="../../getting-started">up and running</a>,
you are ready to create a client connection.</p>

<p>First, you need to know the address (<code>host</code>:<code>port</code>) where the server is
running. This document will assume the values <code>127.0.0.1:9001</code>, but
these can be replaced with your server address in actual code.</p>

<h2 id="default-connection">Default Connection</h2>

<p>The following code snippet connects to the server and queries its version.  It uses our recommended
default setup, expecting the server to be listening on a TLS encrypted connection.</p>

<div class='code-tabs'>
  <ul class="nav-tabs"></ul>
  <div class="tab-content">

<div class="tab-pane" title="Go">
  <div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#6ab825;font-weight:bold">package</span> main

<span style="color:#6ab825;font-weight:bold">import</span> (
    <span style="color:#ed9d13">&#34;context&#34;</span>
    <span style="color:#ed9d13">&#34;fmt&#34;</span>
    <span style="color:#ed9d13">&#34;log&#34;</span>

    <span style="color:#ed9d13">&#34;github.com/cobaltspeech/sdk-luna/grpc/go-luna&#34;</span>
)

<span style="color:#6ab825;font-weight:bold">const</span> serverAddr = <span style="color:#ed9d13">&#34;127.0.0.1:9001&#34;</span>

<span style="color:#6ab825;font-weight:bold">func</span> <span style="color:#447fcf">main</span>() {
    client, err := luna.<span style="color:#447fcf">NewClient</span>(serverAddr)
    <span style="color:#6ab825;font-weight:bold">if</span> err != <span style="color:#6ab825;font-weight:bold">nil</span> {
        log.<span style="color:#447fcf">Fatal</span>(err)
    }

    <span style="color:#999;font-style:italic">// Be sure to close the client when we are done with it.
</span><span style="color:#999;font-style:italic"></span>   <span style="color:#6ab825;font-weight:bold">defer</span> client.<span style="color:#447fcf">Close</span>()

    version, err := client.<span style="color:#447fcf">Version</span>(context.<span style="color:#447fcf">Background</span>()).Version
    <span style="color:#6ab825;font-weight:bold">if</span> err != <span style="color:#6ab825;font-weight:bold">nil</span> {
        log.<span style="color:#447fcf">Fatal</span>(err)
    }

    fmt.<span style="color:#447fcf">Println</span>(version)
}</code></pre></div>
</div>

<div class="tab-pane" title="Python">
  <div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#6ab825;font-weight:bold">from</span> <span style="color:#447fcf;text-decoration:underline">luna.client</span> <span style="color:#6ab825;font-weight:bold">import</span> LunaClient

client = LunaClient(service_address=<span style="color:#ed9d13">&#34;localhost:9001&#34;</span>)
version = client.Version().version
<span style="color:#6ab825;font-weight:bold">print</span>(<span style="color:#ed9d13">&#34;Luna version {}&#34;</span>.format(version))</code></pre></div>
</div>

<div class="tab-pane" title="C&#43;&#43;">
  <div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#999;font-style:italic">// File - main.cpp
</span><span style="color:#999;font-style:italic"></span>
<span style="color:#cd2828;font-weight:bold">#include</span> <span style="color:#cd2828;font-weight:bold">&#34;luna_client.h&#34;</span><span style="color:#cd2828;font-weight:bold">
</span><span style="color:#cd2828;font-weight:bold"></span>
<span style="color:#cd2828;font-weight:bold">#include</span> <span style="color:#cd2828;font-weight:bold">&lt;iostream&gt;</span><span style="color:#cd2828;font-weight:bold">
</span><span style="color:#cd2828;font-weight:bold">#include</span> <span style="color:#cd2828;font-weight:bold">&lt;string&gt;</span><span style="color:#cd2828;font-weight:bold">
</span><span style="color:#cd2828;font-weight:bold"></span>
<span style="color:#6ab825;font-weight:bold">const</span> <span style="color:#6ab825;font-weight:bold">char</span>* serverAddr = <span style="color:#ed9d13">&#34;127.0.0.1:9001&#34;</span>;

<span style="color:#6ab825;font-weight:bold">int</span> <span style="color:#447fcf">main</span>(<span style="color:#6ab825;font-weight:bold">int</span> argc, <span style="color:#6ab825;font-weight:bold">char</span> *argv[])
{
    LunaClient client(serverAddr, <span style="color:#24909d">true</span>);
    std::string version = client.lunaVersion();
    std::cout &lt;&lt; <span style="color:#ed9d13">&#34;Luna version: &#34;</span> &lt;&lt; version &lt;&lt; std::endl;

    <span style="color:#6ab825;font-weight:bold">return</span> <span style="color:#3677a9">0</span>;
}
</code></pre></div>
</div>

<p></div>
</div></p>

<h2 id="insecure-connection">Insecure Connection</h2>

<p>It is sometimes required to connect to Luna server without TLS enabled
(during debugging, for example). Note that if the server has TLS enabled,
attempting to connect with an insecure client will fail.</p>

<p>To create an insecure connection, do the following when creating the client:</p>

<div class='code-tabs'>
  <ul class="nav-tabs"></ul>
  <div class="tab-content">

<div class="tab-pane" title="Go">
  <div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">client, err := luna.<span style="color:#447fcf">NewClientWithInsecure</span>(serverAddr)</code></pre></div>
</div>

<div class="tab-pane" title="Python">
  <div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">client = LunaClient.with_insecure(service_address=<span style="color:#ed9d13">&#34;localhost:9001&#34;</span>)</code></pre></div>
</div>

<div class="tab-pane" title="C&#43;&#43;">
  <div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++">LunaClient <span style="color:#447fcf">client</span>(serverAddr, <span style="color:#24909d">false</span>);
</code></pre></div>
</div>

<p></div>
</div></p>

<h2 id="client-authentication">Client Authentication</h2>

<p>In our recommended default setup, TLS is enabled in the gRPC setup, and when
connecting to the server, clients validate the server&rsquo;s SSL certificate to make
sure they are talking to the right party.  This is similar to how &ldquo;https&rdquo;
connections work in web browsers.</p>

<p>In some setups, it may be desired that the server should also validate clients
connecting to it and only respond to the ones it can verify. If your Luna
server is configured to do client authentication, you will need to present the
appropriate certificate and key when connecting to it.</p>

<p>Please note that in the client-authentication mode, the client will still also
verify the server&rsquo;s certificate, and therefore this setup uses mutually
authenticated TLS. This can be done with:</p>

<div class='code-tabs'>
  <ul class="nav-tabs"></ul>
  <div class="tab-content">

<div class="tab-pane" title="Go">
  <div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#999;font-style:italic">// certfile is a path to the ssl certificate file
</span><span style="color:#999;font-style:italic"></span>certfile=<span style="color:#ed9d13">&#34;/path/to/cert.pem&#34;</span>
client, err := luna.<span style="color:#447fcf">NewClientWithCertFile</span>(serverAddr, certfile)</code></pre></div>
</div>

<div class="tab-pane" title="Python">
  <div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#999;font-style:italic"># certfile is a path to the ssl certificate file</span>
certfile=<span style="color:#ed9d13">&#34;/path/to/cert.pem&#34;</span>
client = LunaClient.with_cert_file(service_address=<span style="color:#ed9d13">&#34;localhost:9001&#34;</span>,
                                   certfile=certfile)</code></pre></div>
</div>

<div class="tab-pane" title="C&#43;&#43;">
  <div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#999;font-style:italic">// Currently unsupported in C++.
</span></code></pre></div>
</div>

<p></div>
</div></p>

    
    
          <footer class=" footline" >
	
</footer>
  </div>
</div>

<div id="navigation">
<a class="nav nav-prev" href="/sdk-luna/using-luna-sdk/errors/" title="Error Handling"> <i class="fa fa-chevron-left"></i><label>Error Handling</label></a>
    <a class="nav nav-next" href="/sdk-luna/using-luna-sdk/synthesis-config/" title="Synthesis Configuration" style="margin-right: 0px;"><label>Synthesis Configuration</label><i class="fa fa-chevron-right"></i></a></div>

</section>
<div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
  <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
</div>    

<script src="/sdk-luna/js/clipboard.min.js"></script>
<script src="/sdk-luna/js/featherlight.min.js"></script>
<script src="/sdk-luna/js/html5shiv-printshiv.min.js"></script>

<script src="/sdk-luna/js/modernizr.custom.71422.js"></script>
<script src="/sdk-luna/js/docdock.js"></script>
<script src="/sdk-luna/theme-original/script.js"></script>


    

    
    

    
  </body>
</html>